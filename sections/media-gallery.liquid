{% if section.blocks.size > 0 %}
  <div
    class="section-media-gallary-wrap {% if section.settings.desktop_hide %} section_deskop_hide{% endif %}{% if section.settings.mobile_hide %} section_mobile_hide{% endif %}"
    {% if section.settings.bg_color != blank %}
      style="background-color:{{section.settings.bg_color}};"
    {% endif %}
  >
    <div class="media-gallary-container">
      {% unless section.settings.enable_fullwidth %}<div class="page-width">{% endunless %}
      {% if section.settings.sub_text %}
        <div class="sub-text-img-main">
          {% if section.settings.sub_text_image -%}
            <img src="{{ section.settings.sub_text_image | img_url:'master' }}">
          {%- endif %}
          {% if section.settings.sub_text -%}
            <span class="review-label">{{ section.settings.sub_text }}</span>
          {%- endif %}
        </div>
      {% endif %}

      <div class="section-heading">
        {% if section.settings.heading != blank %}
          <h2 class="heading hxl">{{ section.settings.heading }}</h2>
        {% endif %}
        {% if section.settings.sub_heading != blank %}
          <div class="sub-heading">{{ section.settings.sub_heading }}</div>
        {% endif %}
      </div>
      {% unless section.settings.enable_fullwidth %}</div>{% endunless %}
      <div class="media-container">
        <div class="media-gallary-wrapper desktop-show">
          {% assign first_row_limit = section.blocks.size %}
          <div class="media-row {% if first_row_limit > 6 %}multi_media_slider{% endif %}">
            {% for block in section.blocks %}
              {% if block.type == 'image' %}
                {% if block.settings.image != blank %}
                  <a
                    href="{% if block.settings.url != blank %}{{ block.settings.url }}{% else %}javascript:void(0){% endif %}"
                    class="media_link"
                  >
                    <div class="media_link-inner">
                      <img
                        srcset="
                          {%- if block.settings.image.width >= 165 -%}{{ block.settings.image | image_url: width: 165 }} 165w,{%- endif -%}
                          {%- if block.settings.image.width >= 360 -%}{{ block.settings.image | image_url: width: 360 }} 360w,{%- endif -%}
                          {%- if block.settings.image.width >= 533 -%}{{ block.settings.image | image_url: width: 533 }} 533w,{%- endif -%}
                          {%- if block.settings.image.width >= 720 -%}{{ block.settings.image | image_url: width: 720 }} 720w,{%- endif -%}
                          {%- if block.settings.image.width >= 1000 -%}{{ block.settings.image | image_url: width: 1000 }} 1000w,{%- endif -%}
                          {%- if block.settings.image.width >= 1500 -%}{{ block.settings.image | image_url: width: 1500 }} 1500w,{%- endif -%}
                          {{ block.settings.image | image_url }} {{ block.settings.image.width }}w
                        "
                        src="{{ block.settings.image | image_url: width: 533 }}"
                        sizes="(min-width: {{ settings.page_width }}px) {{ settings.page_width | minus: 100 | divided_by: 2 }}px, (min-width: 750px) calc((100vw - 130px) / 2), calc((100vw - 50px) / 2)"
                        alt="{{ block.settings.image.alt | escape }}"
                        class="motion-reduce"
                        {% unless lazy_load == false %}
                          loading="lazy"
                        {% endunless %}
                        width="{{ block.settings.image.width }}"
                        height="{{ block.settings.image.height }}"
                      >
                    </div>
                  </a>
                {% endif %}
              {% endif %}
            {% endfor %}
          </div>
        </div>
        <div class="media-gallary-wrapper mobile-show">
          {% assign first_row_limit = section.blocks.size | divided_by: 2 | floor %}
          <div class="first-row {% if first_row_limit > 2 %}multi_media_slider{% endif %}">
            {% for block in section.blocks limit: first_row_limit %}
              {% if block.type == 'image' %}
                {% if block.settings.image != blank %}
                  <a
                    href="{% if block.settings.url != blank %}{{ block.settings.url }}{% else %}javascript:void(0){% endif %}"
                    class="media_link"
                  >
                    <div class="media_link-inner">
                      <img
                        srcset="
                          {%- if block.settings.image.width >= 165 -%}{{ block.settings.image | image_url: width: 165 }} 165w,{%- endif -%}
                          {%- if block.settings.image.width >= 360 -%}{{ block.settings.image | image_url: width: 360 }} 360w,{%- endif -%}
                          {%- if block.settings.image.width >= 533 -%}{{ block.settings.image | image_url: width: 533 }} 533w,{%- endif -%}
                          {%- if block.settings.image.width >= 720 -%}{{ block.settings.image | image_url: width: 720 }} 720w,{%- endif -%}
                          {%- if block.settings.image.width >= 1000 -%}{{ block.settings.image | image_url: width: 1000 }} 1000w,{%- endif -%}
                          {%- if block.settings.image.width >= 1500 -%}{{ block.settings.image | image_url: width: 1500 }} 1500w,{%- endif -%}
                          {{ block.settings.image | image_url }} {{ block.settings.image.width }}w
                        "
                        src="{{ block.settings.image | image_url: width: 533 }}"
                        sizes="(min-width: {{ settings.page_width }}px) {{ settings.page_width | minus: 100 | divided_by: 2 }}px, (min-width: 750px) calc((100vw - 130px) / 2), calc((100vw - 50px) / 2)"
                        alt="{{ block.settings.image.alt | escape }}"
                        class="motion-reduce"
                        {% unless lazy_load == false %}
                          loading="lazy"
                        {% endunless %}
                        width="{{ block.settings.image.width }}"
                        height="{{ block.settings.image.height }}"
                      >
                    </div>
                  </a>
                {% endif %}
              {% endif %}
            {% endfor %}
          </div>
          <div class="second-row {% if section.blocks.size > 4 %}multi_media_slider{% endif %}">
            {% for block in section.blocks offset: first_row_limit %}
              {% if block.type == 'image' %}
                {% if block.settings.image != blank %}
                  <a
                    href="{% if block.settings.url != blank %}{{ block.settings.url }}{% else %}javascript:void(0){% endif %}"
                    class="media_link"
                  >
                    <div class="media_link-inner">
                      <img
                        srcset="
                          {%- if block.settings.image.width >= 165 -%}{{ block.settings.image | image_url: width: 165 }} 165w,{%- endif -%}
                          {%- if block.settings.image.width >= 360 -%}{{ block.settings.image | image_url: width: 360 }} 360w,{%- endif -%}
                          {%- if block.settings.image.width >= 533 -%}{{ block.settings.image | image_url: width: 533 }} 533w,{%- endif -%}
                          {%- if block.settings.image.width >= 720 -%}{{ block.settings.image | image_url: width: 720 }} 720w,{%- endif -%}
                          {%- if block.settings.image.width >= 1000 -%}{{ block.settings.image | image_url: width: 1000 }} 1000w,{%- endif -%}
                          {%- if block.settings.image.width >= 1500 -%}{{ block.settings.image | image_url: width: 1500 }} 1500w,{%- endif -%}
                          {{ block.settings.image | image_url }} {{ block.settings.image.width }}w
                        "
                        src="{{ block.settings.image | image_url: width: 533 }}"
                        sizes="(min-width: {{ settings.page_width }}px) {{ settings.page_width | minus: 100 | divided_by: 2 }}px, (min-width: 750px) calc((100vw - 130px) / 2), calc((100vw - 50px) / 2)"
                        alt="{{ block.settings.image.alt | escape }}"
                        class="motion-reduce"
                        {% unless lazy_load == false %}
                          loading="lazy"
                        {% endunless %}
                        width="{{ block.settings.image.width }}"
                        height="{{ block.settings.image.height }}"
                      >
                    </div>
                  </a>
                {% endif %}
              {% endif %}
            {% endfor %}
          </div>
        </div>
      </div>
      {% unless section.settings.enable_fullwidth %}<div class="page-width">{% endunless %}
      {% if section.settings.btn_text != blank %}
        <div class="button-main-container green-arrow">
          <div class="button-new">
            <a
              href="{% if section.settings.url != blank %}{{ section.settings.url }}{% else %}javascript:void(0){% endif %}"
              class="button-with-image-arrow blue-button"
            >
              {{- section.settings.btn_text }}
              <img
                src="https://cdn.shopify.com/s/files/1/0679/6781/1829/files/button-arrow.png?v=1704291139"
                alt="arrow-icon"
                class="arrow-icon"
            ></a>
          </div>
          {% if section.settings.bottom_text != blank %}
            <div class="button-bottom-text">
              {{ section.settings.bottom_text }}
            </div>
          {% endif %}
        </div>
      {% endif %}
      {% unless section.settings.enable_fullwidth %}</div>{% endunless %}
    </div>
  </div>
{% endif %}
<style>
  .media-gallary-wrapper.desktop-show{
    display:none;
  }
  @media screen and (min-width: 750px) {
    .media-gallary-wrapper.mobile-show{
      display:none;
    }
    .media-gallary-wrapper.desktop-show{
    display:block;
  }
  }
</style>
{% schema %}
 {
   "name": "Media Gallery",
   "settings": [
    {
       "type":"checkbox",
       "id":"enable_fullwidth",
       "label":"Full Width",
       "default":false
     },
     {
       "type":"checkbox",
       "id":"mobile_hide",
       "label":"Mobile Hide"
     },
     {
       "type":"checkbox",
       "id":"desktop_hide",
       "label":"Desktop Hide"
     },
     {
       "type":"color",
       "id":"bg_color",
       "label":"Background Color"
     },
     {
       "type":"image_picker",
       "id":"sub_text_image",
       "label":"Subtext Image"
     },
     {
       "type":"text",
       "id":"sub_text",
       "label":"Subtext"
     },
     {
       "type":"text",
       "id":"heading",
       "label":"Heading"
     },
     {
       "type":"richtext",
       "id":"sub_heading",
       "label":"Subheading"
     },
     {
       "type":"text",
       "id":"btn_text",
       "label":"Button Text"
     },
     {
       "type":"url",
       "id":"url",
       "label":"URL"
     },
     {
       "type":"text",
       "id":"bottom_text",
       "label":"Bottom Text"
     }
   ],
   "blocks":[
     {
       "type":"image",
       "name":"Image",
       "settings":[
         {
           "type":"image_picker",
           "id":"image",
           "label":"Image"
         },
         {
           "type":"url",
           "id":"url",
           "label":"URL"
         }
       ]
     }
   ],
   "presets":[
       {
           "name":"Media Gallery"
       }
   ]
}
{% endschema %}
